System.register(["./index-legacy.C1r-rdf0.js","./vendor-legacy.CICa4llC.js"],(function(e,t){"use strict";var r,n,a,o,i;return{setters:[e=>{r=e.j,n=e.p,a=e.c},e=>{o=e.r,i=e.A}],execute:function(){var t=document.createElement("style");t.textContent=".equalizer__wrapper{max-width:150px;overflow:hidden}\n",document.head.appendChild(t);var c,s={exports:{}},l={};s.exports=function(){if(c)return l;c=1;var e=i,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,r,i){var c,s={},l=null,u=null;for(c in void 0!==i&&(l=""+i),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(u=r.ref),r)n.call(r,c)&&!o.hasOwnProperty(c)&&(s[c]=r[c]);if(e&&e.defaultProps)for(c in r=e.defaultProps)void 0===s[c]&&(s[c]=r[c]);return{$$typeof:t,type:e,key:l,ref:u,props:s,_owner:a.current}}return l.Fragment=r,l.jsx=s,l.jsxs=s,l}();var u=s.exports;const f=({mediaRecorder:e,width:t="100%",height:r="100%",barWidth:n=2,gap:a=1,backgroundColor:i="transparent",barColor:c="rgb(160, 198, 255)",fftSize:s=1024,maxDecibels:l=-10,minDecibels:f=-90,smoothingTimeConstant:d=.4})=>{const[h]=o.useState((()=>new AudioContext)),[m,g]=o.useState(),p=o.useRef(null);o.useEffect((()=>{if(!e.stream)return;const t=h.createAnalyser();g(t),t.fftSize=s,t.minDecibels=f,t.maxDecibels=l,t.smoothingTimeConstant=d,h.createMediaStreamSource(e.stream).connect(t)}),[e.stream]),o.useEffect((()=>{m&&"recording"===e.state&&y()}),[m,e.state]);const y=o.useCallback((()=>{if(!m)return;const t=new Uint8Array(null==m?void 0:m.frequencyBinCount);"recording"===e.state?(null==m||m.getByteFrequencyData(t),w(t),requestAnimationFrame(y)):"paused"===e.state?w(t):"inactive"===e.state&&"closed"!==h.state&&h.close()}),[m,h.state]),w=e=>{if(!p.current)return;const t=((e,t,r,n)=>{let a=t/(r+n),o=Math.floor(e.length/a);a>e.length&&(a=e.length,o=1);const i=[];for(let c=0;c<a;c++){let t=0;for(let r=0;r<o&&c*o+r<e.length;r++)t+=e[c*o+r];i.push(t/o)}return i})(e,p.current.width,n,a);((e,t,r,n,a,o)=>{const i=t.height/2,c=t.getContext("2d");c&&(c.clearRect(0,0,t.width,t.height),"transparent"!==a&&(c.fillStyle=a,c.fillRect(0,0,t.width,t.height)),e.forEach(((e,t)=>{c.fillStyle=o;const a=t*(r+n),s=i-e/2,l=r,u=e||1;c.beginPath(),c.roundRect?(c.roundRect(a,s,l,u,50),c.fill()):c.fillRect(a,s,l,u)})))})(t,p.current,n,a,i,c)};return u.jsx("canvas",{ref:p,width:t,height:r,style:{aspectRatio:"unset"}})},d=(e,t,r,n,a,o,i,c=0,s=1)=>{const l=t.height/2,u=t.getContext("2d");if(!u)return;u.clearRect(0,0,t.width,t.height),"transparent"!==a&&(u.fillStyle=a,u.fillRect(0,0,t.width,t.height));const f=(c||0)/s;e.forEach(((t,a)=>{const c=a/e.length,s=f>c;u.fillStyle=s&&i?i:o;const d=a*(r+n),h=l+t.min,m=r,g=l+t.max-h;u.beginPath(),u.roundRect?(u.roundRect(d,h,m,g,50),u.fill()):u.fillRect(d,h,m,g)}))},h=o.forwardRef((({blob:e,width:t,height:r,barWidth:n=2,gap:a=1,currentTime:i,style:c,backgroundColor:s="transparent",barColor:l="rgb(184, 184, 184)",barPlayedColor:f="rgb(160, 198, 255)"},h)=>{const m=o.useRef(null),[g,p]=o.useState([]),[y,w]=o.useState(0);return o.useImperativeHandle(h,(()=>m.current),[]),o.useEffect((()=>{(async()=>{if(!m.current)return;if(!e){const e=Array.from({length:100},(()=>({max:0,min:0})));return void d(e,m.current,n,a,s,l,f)}const o=await e.arrayBuffer();await(new AudioContext).decodeAudioData(o,(e=>{if(!m.current)return;w(e.duration);const o=((e,t,r,n,a)=>{const o=e.getChannelData(0),i=r/(n+a),c=Math.floor(o.length/i),s=t/2;let l=[],u=0;for(let f=0;f<i;f++){const t=[];let r=0;const n=[];let a=0;for(let l=0;l<c&&f*c+l<e.length;l++){const e=o[f*c+l];e<=0&&(t.push(e),r++),e>0&&(n.push(e),a++)}const i=t.reduce(((e,t)=>e+t),0)/r,s={max:n.reduce(((e,t)=>e+t),0)/a,min:i};s.max>u&&(u=s.max),Math.abs(s.min)>u&&(u=Math.abs(s.min)),l.push(s)}if(.8*s>u*s){const e=.8*s/u;l=l.map((t=>({max:t.max*e,min:t.min*e})))}return l})(e,r,t,n,a);p(o),d(o,m.current,n,a,s,l,f)}))})()}),[e,m.current]),o.useEffect((()=>{m.current&&d(g,m.current,n,a,s,l,f,i,y)}),[i,y]),u.jsx("canvas",{ref:m,width:t,height:r,style:{...c}})}));h.displayName="AudioVisualizer";const m=()=>{const e=o.useRef(null),[t,a]=o.useState(!1),[i,c]=o.useState(null),[s,l]=o.useState(),u=o.useRef(null),d=async()=>{try{const e=await fetch("/video.mp4"),t=await e.blob();l(t)}catch(e){}};o.useEffect((()=>(d(),()=>{d()})),[]);const[m,g]=o.useState(0);return o.useEffect((()=>{let t;const r=()=>{e.current&&g(e.current.currentTime),t=requestAnimationFrame(r)};return r(),()=>cancelAnimationFrame(t)}),[]),r.jsxs("div",{children:[r.jsxs("video",{ref:e,width:"320",height:"240",poster:n,children:[r.jsx("source",{src:"/video.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),s&&r.jsx(h,{ref:u,blob:s,width:300,height:70,barWidth:5,gap:5,barColor:"#ffffff",barPlayedColor:"#ad7955",currentTime:m}),r.jsx("button",{onClick:async()=>{await(async()=>{try{const t=e.current;if(!t)return;const r=new(window.AudioContext||window.webkitAudioContext),n=r.createMediaElementSource(t),a=r.createMediaStreamDestination();n.connect(a),n.connect(r.destination);const o=new MediaRecorder(a.stream);c(o),o.start()}catch(t){}})(),t?e.current&&e.current.pause():e.current&&e.current.play(),a(!t)},children:t?"Pause":"Play"}),i&&r.jsx("div",{className:"equalizer__wrapper",children:r.jsx(f,{mediaRecorder:i,width:300,height:70,barWidth:5,gap:8,barColor:"#ffffff"})})]})};e("Route",a("/_logInLayout/logIn")({component:function(){return r.jsxs("div",{children:[r.jsx("h3",{children:"Log in page"}),r.jsx(m,{})]})}}))}}}));
